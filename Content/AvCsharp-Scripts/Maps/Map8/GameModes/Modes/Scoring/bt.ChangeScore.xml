<?xml version="1.0" encoding="utf-8"?>
<BehaviorTrees>
  <BehaviorTree Name="Modes.Dominion.Scoring.ChangeScore">
    <Parameters>
      <Parameter Name="ScoreValue" VariableType="Reference, Value" ParameterType="Float" Default="" Optional="false">
        <Description>The amount of score to change by</Description>
      </Parameter>
      <Parameter Name="ChaosScore" VariableType="Reference" ParameterType="Float" Default="" Optional="false">
        <Description>Score of the chaos team</Description>
      </Parameter>
      <Parameter Name="OrderScore" VariableType="Reference" ParameterType="Float" Default="" Optional="false">
        <Description>Score for the order team before change</Description>
      </Parameter>
      <Parameter Name="ScoringTeam" VariableType="Reference, Value" ParameterType="TeamEnum" Default="" Optional="false">
        <Description>Either Order or Chaos.
The team that is scoring</Description>
      </Parameter>
      <Parameter Name="CanWin" VariableType="Reference, Value" ParameterType="Bool" Default="" Optional="false">
        <Description>Can this score game win the game?

If Not, it'll at most reduce this to 1</Description>
      </Parameter>
      <OutParameter Name="ChaosScore" ParameterType="Float">
        <Description></Description>
      </OutParameter>
      <OutParameter Name="OrderScore" ParameterType="Float">
        <Description></Description>
      </OutParameter>
    </Parameters>
    <Node Type="Selector" Name="OrderOrChaos">
      <Parameters />
      <Children>
        <Node Type="Sequence" Name="ChangeScoreForChaos">
          <Parameters />
          <Children>
            <Node Type="EqualUnitTeam" Name="ScoringTeam==TeamOrder">
              <Parameters>
                <Parameter Name="LeftHandSide" Value="ScoringTeam" VariableType="Reference" ReferenceType="TeamEnum" />
                <Parameter Name="RightHandSide" Value="TEAM_ORDER" VariableType="Value" />
              </Parameters>
            </Node>
            <Node Type="SubtractFloat" Name="ChaosScore-=ScoreValue">
              <Parameters>
                <Parameter Name="LeftHandSide" Value="ChaosScore" VariableType="Reference" ReferenceType="Float" />
                <Parameter Name="RightHandSide" Value="ScoreValue" VariableType="Reference" ReferenceType="Float" />
                <OutParameter Name="Output" Value="ChaosScore" ReferenceType="Float" />
              </Parameters>
            </Node>
            <Node Type="MaskFailure" Name="Check_For_Can_Win">
              <Parameters />
              <Children>
                <Node Type="Selector" Name="Selector">
                  <Parameters />
                  <Children>
                    <Node Type="Sequence" Name="Sequence">
                      <Parameters />
                      <Children>
                        <Node Type="EqualBool" Name="CanWin==False">
                          <Parameters>
                            <Parameter Name="LeftHandSide" Value="CanWin" VariableType="Reference" ReferenceType="Bool" />
                            <Parameter Name="RightHandSide" Value="False" VariableType="Value" />
                          </Parameters>
                        </Node>
                        <Node Type="MaxFloat" Name="Max(ChaosScore,1)">
                          <Parameters>
                            <Parameter Name="LeftHandSide" Value="ChaosScore" VariableType="Reference" ReferenceType="Float" />
                            <Parameter Name="RightHandSide" Value="1" VariableType="Value" />
                            <OutParameter Name="Output" Value="ChaosScore" ReferenceType="Float" />
                          </Parameters>
                        </Node>
                      </Children>
                    </Node>
                    <Node Type="Sequence" Name="DrumBeatCheck">
                      <Parameters />
                      <Children>
                        <Node Type="MultiplyFloat" Name="MultiplyFloat">
                          <Parameters>
                            <Parameter Name="LeftHandSide" Value="ScoreValue" VariableType="Reference" ReferenceType="Float" />
                            <Parameter Name="RightHandSide" Value="5" VariableType="Value" />
                            <OutParameter Name="Output" Value="LaterScoreValue" ReferenceType="Float" />
                          </Parameters>
                        </Node>
                        <Node Type="SubtractFloat" Name="LaterScoreValue=ChaosScore-LaterScoreValue">
                          <Parameters>
                            <Parameter Name="LeftHandSide" Value="ChaosScore" VariableType="Reference" ReferenceType="Float" />
                            <Parameter Name="RightHandSide" Value="LaterScoreValue" VariableType="Reference" ReferenceType="Float" />
                            <OutParameter Name="Output" Value="LaterScoreValue" ReferenceType="Float" />
                          </Parameters>
                        </Node>
                        <Node Type="LessEqualFloat" Name="LessEqualFloat">
                          <Parameters>
                            <Parameter Name="LeftHandSide" Value="LaterScoreValue" VariableType="Reference" ReferenceType="Float" />
                            <Parameter Name="RightHandSide" Value="0" VariableType="Value" />
                          </Parameters>
                        </Node>
                        <Node Type="PlayVOAudioEvent" Name="DrumBeat!">
                          <Parameters>
                            <Parameter Name="EventID" Value="Odin.SFX.scoretick" VariableType="Value" />
                            <Parameter Name="FolderName" Value="Announcer/Odin" VariableType="Value" />
                            <Parameter Name="FireAndForget" Value="True" VariableType="Value" />
                          </Parameters>
                        </Node>
                      </Children>
                    </Node>
                  </Children>
                </Node>
              </Children>
            </Node>
            <Node Type="SetGameScore" Name="SetGameScoreForChaos">
              <Parameters>
                <Parameter Name="Team" Value="TEAM_CHAOS" VariableType="Value" />
                <Parameter Name="Score" Value="ChaosScore" VariableType="Reference" ReferenceType="Float" />
              </Parameters>
            </Node>
          </Children>
        </Node>
        <Node Type="Sequence" Name="ChangeScoreForOrder">
          <Parameters />
          <Children>
            <Node Type="EqualUnitTeam" Name="ScoringTeam==TeamChaos">
              <Parameters>
                <Parameter Name="LeftHandSide" Value="ScoringTeam" VariableType="Reference" ReferenceType="TeamEnum" />
                <Parameter Name="RightHandSide" Value="TEAM_CHAOS" VariableType="Value" />
              </Parameters>
            </Node>
            <Node Type="SubtractFloat" Name="OrderScore-=ScoreValue">
              <Parameters>
                <Parameter Name="LeftHandSide" Value="OrderScore" VariableType="Reference" ReferenceType="Float" />
                <Parameter Name="RightHandSide" Value="ScoreValue" VariableType="Reference" ReferenceType="Float" />
                <OutParameter Name="Output" Value="OrderScore" ReferenceType="Float" />
              </Parameters>
            </Node>
            <Node Type="MaskFailure" Name="Check_For_Can_Win">
              <Parameters />
              <Children>
                <Node Type="Selector" Name="Selector">
                  <Parameters />
                  <Children>
                    <Node Type="Sequence" Name="Sequence">
                      <Parameters />
                      <Children>
                        <Node Type="EqualBool" Name="CanWin==False">
                          <Parameters>
                            <Parameter Name="LeftHandSide" Value="CanWin" VariableType="Reference" ReferenceType="Bool" />
                            <Parameter Name="RightHandSide" Value="False" VariableType="Value" />
                          </Parameters>
                        </Node>
                        <Node Type="MaxFloat" Name="Max(ChaosScore,1)">
                          <Parameters>
                            <Parameter Name="LeftHandSide" Value="OrderScore" VariableType="Reference" ReferenceType="Float" />
                            <Parameter Name="RightHandSide" Value="1" VariableType="Value" />
                            <OutParameter Name="Output" Value="OrderScore" ReferenceType="Float" />
                          </Parameters>
                        </Node>
                      </Children>
                    </Node>
                    <Node Type="Sequence" Name="DrumBeatCheck">
                      <Parameters />
                      <Children>
                        <Node Type="MultiplyFloat" Name="MultiplyFloat">
                          <Parameters>
                            <Parameter Name="LeftHandSide" Value="ScoreValue" VariableType="Reference" ReferenceType="Float" />
                            <Parameter Name="RightHandSide" Value="5" VariableType="Value" />
                            <OutParameter Name="Output" Value="LaterScoreValue" ReferenceType="Float" />
                          </Parameters>
                        </Node>
                        <Node Type="SubtractFloat" Name="LaterScoreValue=OrderScore-ScoreValue">
                          <Parameters>
                            <Parameter Name="LeftHandSide" Value="OrderScore" VariableType="Reference" ReferenceType="Float" />
                            <Parameter Name="RightHandSide" Value="LaterScoreValue" VariableType="Reference" ReferenceType="Float" />
                            <OutParameter Name="Output" Value="LaterScoreValue" ReferenceType="Float" />
                          </Parameters>
                        </Node>
                        <Node Type="LessEqualFloat" Name="LessEqualFloat">
                          <Parameters>
                            <Parameter Name="LeftHandSide" Value="LaterScoreValue" VariableType="Reference" ReferenceType="Float" />
                            <Parameter Name="RightHandSide" Value="0" VariableType="Value" />
                          </Parameters>
                        </Node>
                        <Node Type="PlayVOAudioEvent" Name="DrumBeat!">
                          <Parameters>
                            <Parameter Name="EventID" Value="Odin.SFX.scoretick" VariableType="Value" />
                            <Parameter Name="FolderName" Value="Announcer/Odin" VariableType="Value" />
                            <Parameter Name="FireAndForget" Value="True" VariableType="Value" />
                          </Parameters>
                        </Node>
                      </Children>
                    </Node>
                  </Children>
                </Node>
              </Children>
            </Node>
            <Node Type="SetGameScore" Name="SetGameScoreForOrder">
              <Parameters>
                <Parameter Name="Team" Value="TEAM_ORDER" VariableType="Value" />
                <Parameter Name="Score" Value="OrderScore" VariableType="Reference" ReferenceType="Float" />
              </Parameters>
            </Node>
          </Children>
        </Node>
      </Children>
    </Node>
  </BehaviorTree>
</BehaviorTrees>